install.packages(gpairs)
install.packages("GGally")
library("GGally")
library("ggplot2")
library("GGally")
y <- data.frame(A=c(rep("red", 100), rep("blue", 100)),
B=c(rnorm(100),round(rnorm(100,5,1),1)), C=runif(200),
D=c(rep("big", 150), rep("small", 50)),
E=rnorm(200))
gpairs(y)
ggpairs(y)
data(iris)
gpairs(iris)
if (allexamples) {
gpairs(iris, upper.pars = list(scatter = 'stats'),
scatter.pars = list(pch = substr(as.character(iris$Species), 1, 1),
col = as.numeric(iris$Species)),
stat.pars = list(verbose = FALSE))
gpairs(iris, lower.pars = list(scatter = 'corrgram'),
upper.pars = list(conditional = 'boxplot', scatter = 'loess'),
scatter.pars = list(pch = 20))
}
ggpairs(iris)
if (allexamples) {
gpairs(iris, upper.pars = list(scatter = 'stats'),
scatter.pars = list(pch = substr(as.character(iris$Species), 1, 1),
col = as.numeric(iris$Species)),
stat.pars = list(verbose = FALSE))
gpairs(iris, lower.pars = list(scatter = 'corrgram'),
upper.pars = list(conditional = 'boxplot', scatter = 'loess'),
scatter.pars = list(pch = 20))
}
data(Leaves)
ggpairs(Leaves[1:10], lower.pars = list(scatter = 'loess'))
?Leaves
??Leaves
install.packages("Leaves")
data(Leaves)
install.packages("randomForest")
install.packages("xgboost")
data(Leaves)
??Leaves
install.packages("TreeAndLeaf")
data(Leaves)
library("TreeAndLeaf")
data(Leaves)
library("randomForest")
data(Leaves)
#faster xls reader but requires perl!
bronx1<-read.xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
install.packages("readxl")
library(gdata)
library(ggdata)
library(gdata)
install.packages("readxl")
library(readxl)
#faster xls reader but requires perl!
bronx1<-read.xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
?read_xls
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
View(bronx1)
bronx1<-bronx1[which(bronx1$GROSS.SQUARE.FEET!="0" & bronx1$LAND.SQUARE.FEET!="0" & bronx1$SALE.PRICE!="$0"),]
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
bronx1<-bronx1[which(bronx1$GROSS.SQUARE.FEET!="0" & bronx1$LAND.SQUARE.FEET!="0" & bronx1$SALE.PRICE!="$0"),]
?read.xls
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
bronx1<-bronx1[which(bronx1$GROSS.SQUARE.FEET!="0" & bronx1$LAND.SQUARE.FEET!="0" & bronx1$SALE.PRICE!="$0"),]
View(bronx1)
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
View(bronx1)
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1,4),]
colnames(bronx1)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1,4),]
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$GROSS.SQUARE.FEET!="0" & bronx1$LAND.SQUARE.FEET!="0" & bronx1$SALE.PRICE!="$0"),]
View(bronx1)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
View(bronx1)
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE PRICE`!="$0"),]
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
View(bronx1)
coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE PRICE`!="0"),]
coln[,-2]
colnames(bronx1)<- coln
coln[,-2]
coln[1,-2]
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
View(coln)
coln[1,20]
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
View(bronx1)
#
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
`SALE\nPRICE`<-sub("\\$","",`SALE\nPRICE`)
`SALE\nPRICE`<-as.numeric(gsub(",","", `SALE\nPRICE`))
`GROSS SQUARE FEET`<-as.numeric(gsub(",","", `GROSS SQUARE FEET`))
`LAND SQUARE FEET`<-as.numeric(gsub(",","", `LAND SQUARE FEET`))
#
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
`SALE\nPRICE`<-sub("\\$","",`SALE\nPRICE`)
`SALE\nPRICE`<-as.numeric(gsub(",","", `SALE\nPRICE`))
`GROSS SQUARE FEET`<-as.numeric(gsub(",","", `GROSS SQUARE FEET`))
`LAND SQUARE FEET`<-as.numeric(gsub(",","", `LAND SQUARE FEET`))
plot(log(`GROSS SQUARE FEET`), log(`SALE\nPRICE`))
m1<-lm(log(`SALE\nPRICE`)~log(`GROSS SQUARE FEET`))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2<-lm(log(bronx1$`SALE\nPRICE`)~log(bronx1$`GROSS SQUARE FEET`)+log(bronx1$`LAND SQUARE FEET`)+factor(bronx1$NEIGHBORHOOD))
m2<-lm(log(bronx1$`SALE\nPRICE`)~log(bronx1$`GROSS SQUARE FEET`)+log(bronx1$`LAND SQUARE FEET`)+factor(bronx1$NEIGHBORHOOD))
summary(m2)
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE_PRICE"
m2<-lm(log(bronx1$SALE_PRICE)~log(bronx1$`GROSS SQUARE FEET`)+log(bronx1$`LAND SQUARE FEET`)+factor(bronx1$NEIGHBORHOOD))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
coln[1,20]
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
View(bronx1)
#
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
View(bronx1)
SALE.PRICE<-sub("\\$","",SALE.PRICE)
#
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE_PRICE"
#
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
m2<-lm(log(bronx1$SALE_PRICE)~log(bronx1$`GROSS SQUARE FEET`)+log(bronx1$`LAND SQUARE FEET`)+factor(bronx1$NEIGHBORHOOD))
m2<-lm(log(bronx1$SALE.PRICE)~log(bronx1$GROSS.SQUARE.FEET)+log(bronx1$LAND.SQUARE.FEET)+factor(bronx1$NEIGHBORHOOD))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2)
plot(resid(m2))
# Suppress intercept - using "0+ ..."
m2a<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2a)
plot(resid(m2a))
# Model 3
m3<-lm(log(bronx1$SALE.PRICE)~0+log(bronx1$GROSS.SQUARE.FEET)+log(bronx1$LAND.SQUARE.FEET)+factor(bronx1$NEIGHBORHOOD)+factor(bronx1$BUILDING.CLASS.CATEGORY))
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2)
plot(resid(m2))
# Suppress intercept - using "0+ ..."
m2a<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2a)
plot(resid(m2a))
# Model 3
m3<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)+factor(BUILDING.CLASS.CATEGORY))
summary(m3)
# Model 3
m3<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)+factor(BUILDING.CLASS.CATEGORY))
# Model 3
m3<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)+factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m3)
plot(resid(m3))
# Model 4
m4<-lm(log(bronx1$SALE.PRICE)~0+log(bronx1$GROSS.SQUARE.FEET)+log(bronx1$LAND.SQUARE.FEET)+factor(bronx1$NEIGHBORHOOD)*factor(bronx1$BUILDING.CLASS.CATEGORY))
# Model 4
m4<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)*factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m4)
plot(resid(m4))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
View(bronx1)
#
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2)
plot(resid(m2))
# Suppress intercept - using "0+ ..."
m2a<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2a)
plot(resid(m2a))
# Model 3
m3<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)+factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m3)
plot(resid(m3))
# Model 4
m4<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)*factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m4)
plot(resid(m4))
View(bronx1)
bronx1$SALE.PRICE<-sub("\\$","",bronx1$SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", bronx1$SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$LAND.SQUARE.FEET))
bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
names(bronx1)[names(bronx1) == "SALE DATE"] <- "SALE.DATE"
bronx1$SALE.PRICE<-sub("\\$","",bronx1$SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", bronx1$SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$LAND.SQUARE.FEET))
bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
names(bronx1)[names(bronx1) == "SALE DATE"] <- "SALE.DATE"
names(bronx1)[names(bronx1) == "YEAR BUILT"] <- "YEAR.BUILT"
names(bronx1)[names(bronx1) == "ZIP CODE"] <- "ZIP.CODE"
bronx1$SALE.PRICE<-sub("\\$","",bronx1$SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", bronx1$SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$LAND.SQUARE.FEET))
bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
View(bronx1)
#bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
bronx1$SALE.DATE <- as.Date(gsub("[^\\d]", "", bronx1$SALE.DATE))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
names(bronx1)[names(bronx1) == "SALE DATE"] <- "SALE.DATE"
names(bronx1)[names(bronx1) == "YEAR BUILT"] <- "YEAR.BUILT"
names(bronx1)[names(bronx1) == "ZIP CODE"] <- "ZIP.CODE"
bronx1$SALE.PRICE<-sub("\\$","",bronx1$SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", bronx1$SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$LAND.SQUARE.FEET))
#bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
bronx1$SALE.DATE <- as.Date(gsub("[[:^digit:]]", "", bronx1$SALE.DATE))
summary(m2)
#bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
bronx1$SALE.DATE <- as.Date(gsub("[[:digit:]]", "", bronx1$SALE.DATE))
#bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
bronx1$SALE.DATE <- as.Date(gsub("[[^:digit:]]", "", bronx1$SALE.DATE))
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
names(bronx1)[names(bronx1) == "SALE DATE"] <- "SALE.DATE"
names(bronx1)[names(bronx1) == "YEAR BUILT"] <- "YEAR.BUILT"
names(bronx1)[names(bronx1) == "ZIP CODE"] <- "ZIP.CODE"
bronx1$SALE.PRICE<-sub("\\$","",bronx1$SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", bronx1$SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", bronx1$LAND.SQUARE.FEET))
#bronx1$SALE.DATE<- as.Date(gsub("[^]:digit:]]","",bronx1$SALE.DATE))
bronx1$SALE.DATE <- as.Date(gsub("[[^:digit:]]", "", bronx1$SALE.DATE))
#bronx1$YEAR.BUILT<- as.numeric(gsub("[^]:digit:]]","",bronx1$YEAR.BUILT))
bronx1$YEAR.BUILT<- as.numeric(gsub("[[^:digit:]]","",bronx1$YEAR.BUILT))
#bronx1$ZIP.CODE<- as.character(gsub("[^]:digit:]]","",bronx1$ZIP.CODE))
bronx1$ZIP.CODE<- as.character(gsub("[[^:digit:]]","",bronx1$ZIP.CODE))
minprice<-10000
bronx1<-bronx1[which(bronx1$SALE.PRICE>=minprice),]
nval<-dim(bronx1)[1]
bronx1$ADDRESSONLY<- gsub("[,][[:print:]]*","",gsub("[ ]+","",trim(bronx1$ADDRESS))) bronxadd<-unique(data.frame(bronx1$ADDRESSONLY, bronx1$ZIP.CODE,stringsAsFactors=FALSE)) names(bronxadd)<-c("ADDRESSONLY","ZIP.CODE") bronxadd<-bronxadd[order(bronxadd$ADDRESSONLY),] duplicates<-duplicated(bronx1$ADDRESSONLY)
bronx1$ADDRESSONLY<- gsub("[,][[:print:]]*","",gsub("[ ]+","",trim(bronx1$ADDRESS))) bronxadd<-unique(data.frame(bronx1$ADDRESSONLY, bronx1$ZIP.CODE,stringsAsFactors=FALSE)) names(bronxadd)<-c("ADDRESSONLY","ZIP.CODE") bronxadd<-bronxadd[order(bronxadd$ADDRESSONLY),] duplicates<-duplicated(bronx1$ADDRESSONLY)
bronx1$ADDRESSONLY<- gsub("[,][[:print:]]*","",gsub("[ ]+","",trim(bronx1$ADDRESS)))
bronx1$ADDRESSONLY<- gsub("[,][[:print:]]*","",gsub("[ ]+","",trim(bronx1$ADDRESS)))
bronxadd<-unique(data.frame(bronx1$ADDRESSONLY, bronx1$ZIP.CODE,stringsAsFactors=FALSE))
names(bronxadd)<-c("ADDRESSONLY","ZIP.CODE")
bronxadd<-bronxadd[order(bronxadd$ADDRESSONLY),]
duplicates<-duplicated(bronx1$ADDRESSONLY)
for(i in 1:2345) {
if(duplicates[i]==FALSE) dupadd<-bronxadd[bronxadd$duplicates,1]
}#what are we doing with dupadd?
nsample=450
addsample<-bronxadd[sample.int(dim(bronxadd),size=nsample),]#I use nval here
addsample<-bronxadd[sample.int(dim(bronxadd),size=nsample),]#I use nval here
#addsample<-bronxadd[sample.int(dim(bronxadd),size=nsample),]#I use nval here
addsample <- bronxadd[sample.int(n = dim(bronxadd)[1], size = nsample),]
# may need to install this package
library(ggmap)
install.packages("ggmap")
# may need to install this package
library(ggmap)
addrlist<-paste(addsample$ADDRESSONLY, "NY", addsample$ZIP.CODE, "US", sep=" ")
querylist<-geocode(addrlist) #This is cool. Take a break.
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE PRICE`!="$0"),]
library(gdata)
library(readxl)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
View(bronx1)
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
#View(bronx1)
#
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2)
plot(resid(m2))
# Suppress intercept - using "0+ ..."
m2a<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2a)
plot(resid(m2a))
# Model 3
m3<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)+factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m3)
plot(resid(m3))
# Model 4
m4<-lm(log(SALE.PRICE)~0+log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD)*factor(bronx1$BUILDING.CLASS.CATEGORY))
summary(m4)
plot(resid(m4))
View(bronx1)
bronx1$BUILDING.CLASS.CATEGORY <- factor(bronx1$BUILDING.CLASS.CATEGORY)
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
#View(bronx1)
#
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
summary(m2)
bornx1<- na.omit(bornx1)
#faster xls reader but requires perl!
bronx1<-read_xls("c:/code/CSCI4600_hw/DA_Files/NYhousing/rollingsales_bronx.xls")
coln <- bronx1[4,]
bronx1 <- bronx1[-c(1:4),]
colnames(bronx1)<- coln
bronx1<-bronx1[which(bronx1$`GROSS SQUARE FEET`!="0" & bronx1$`LAND SQUARE FEET`!="0" & bronx1$`SALE\nPRICE`!="0"),]
bronx1$BUILDING.CLASS.CATEGORY <- factor(bronx1$BUILDING.CLASS.CATEGORY)
bronx1 <- na.omit(bronx1)
names(bronx1)[names(bronx1) == "SALE\nPRICE"] <- "SALE.PRICE"
names(bronx1)[names(bronx1) == "GROSS SQUARE FEET"] <- "GROSS.SQUARE.FEET"
names(bronx1)[names(bronx1) == "LAND SQUARE FEET"] <- "LAND.SQUARE.FEET"
names(bronx1)[names(bronx1) == "BUILDING CLASS CATEGORY"] <- "BUILDING.CLASS.CATEGORY"
bronx1$BUILDING.CLASS.CATEGORY <- factor(bronx1$BUILDING.CLASS.CATEGORY)
bronx1 <- na.omit(bronx1)
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
#View(bronx1)
#
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
bronx1$NEIGHBORHOOD <-  factor(bronx1$NEIGHBORHOOD)
bronx1 <- na.omit(bronx1)
#alternate
#library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
#bronx1<-read.xlsx("<SOMEWHERE>/rollingsales_bronx.xls",pattern="BOROUGH",stringsAsFactors=FALSE,sheetIndex=1,startRow=5,header=TRUE)
#View(bronx1)
#
attach(bronx1) # If you choose to attach, leave out the "data=." in lm regression
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+factor(NEIGHBORHOOD))
m2<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET)+log(LAND.SQUARE.FEET)+NEIGHBORHOOD)
factor(
